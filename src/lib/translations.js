// ============================================
// Multi-language phrase translation for ESG answers
// Template-based: replaces common ESG phrases in generated answers
// ============================================

export const LANGUAGES = [
  { code: 'en', label: 'English' },
  { code: 'de', label: 'Deutsch' },
  { code: 'fr', label: 'Français' },
  { code: 'es', label: 'Español' },
];

const PHRASE_MAP = {
  de: {
    'We have implemented': 'Wir haben implementiert',
    'Our company': 'Unser Unternehmen',
    'We maintain': 'Wir pflegen',
    'We are committed to': 'Wir verpflichten uns zu',
    'Our policy covers': 'Unsere Richtlinie umfasst',
    'We are in the process of': 'Wir sind dabei',
    'Data not currently available': 'Daten derzeit nicht verfügbar',
    'This data is based on': 'Diese Daten basieren auf',
    'Total emissions': 'Gesamtemissionen',
    'Scope 1 emissions': 'Scope-1-Emissionen',
    'Scope 2 emissions': 'Scope-2-Emissionen',
    'Scope 3 emissions': 'Scope-3-Emissionen',
    'tonnes CO2e': 'Tonnen CO2e',
    'tCO2e': 'tCO2e',
    'renewable energy': 'erneuerbare Energie',
    'recycling rate': 'Recyclingquote',
    'total waste': 'Gesamtabfall',
    'water consumption': 'Wasserverbrauch',
    'training hours': 'Schulungsstunden',
    'work accidents': 'Arbeitsunfälle',
    'work-related injuries': 'arbeitsbedingte Verletzungen',
    'per year': 'pro Jahr',
    'per employee': 'pro Mitarbeiter',
    'per annum': 'pro Jahr',
    'employees': 'Mitarbeiter',
    'estimated': 'geschätzt',
    'measured': 'gemessen',
    'calculated': 'berechnet',
    'implementing': 'umzusetzen',
    'code of conduct': 'Verhaltenskodex',
    'environmental policy': 'Umweltpolitik',
    'environmental management': 'Umweltmanagement',
    'anti-corruption': 'Antikorruption',
    'anti-bribery': 'Antibestechung',
    'health and safety': 'Gesundheit und Sicherheit',
    'occupational health': 'Arbeitsschutz',
    'diversity and inclusion': 'Vielfalt und Inklusion',
    'diversity': 'Vielfalt',
    'sustainability': 'Nachhaltigkeit',
    'sustainable development': 'nachhaltige Entwicklung',
    'supply chain': 'Lieferkette',
    'value chain': 'Wertschöpfungskette',
    'human rights': 'Menschenrechte',
    'greenhouse gas': 'Treibhausgas',
    'carbon footprint': 'CO2-Fußabdruck',
    'carbon emissions': 'CO2-Emissionen',
    'climate change': 'Klimawandel',
    'energy efficiency': 'Energieeffizienz',
    'energy consumption': 'Energieverbrauch',
    'waste management': 'Abfallmanagement',
    'water management': 'Wassermanagement',
    'hazardous waste': 'Gefährlicher Abfall',
    'biodiversity': 'Biodiversität',
    'stakeholder engagement': 'Stakeholder-Engagement',
    'stakeholders': 'Interessengruppen',
    'due diligence': 'Sorgfaltspflicht',
    'risk assessment': 'Risikobewertung',
    'continuous improvement': 'kontinuierliche Verbesserung',
    'reporting period': 'Berichtszeitraum',
    'fiscal year': 'Geschäftsjahr',
    'calendar year': 'Kalenderjahr',
    'electricity': 'Strom',
    'natural gas': 'Erdgas',
    'renewable': 'erneuerbar',
    'recycled': 'recycelt',
    'landfill': 'Deponie',
    'workforce': 'Belegschaft',
    'gender pay gap': 'Geschlechtsspezifisches Lohngefälle',
    'whistleblower': 'Hinweisgeber',
    'grievance mechanism': 'Beschwerdemechanismus',
    'materiality assessment': 'Wesentlichkeitsanalyse',
    'data privacy': 'Datenschutz',
    'circular economy': 'Kreislaufwirtschaft',
  },
  fr: {
    'We have implemented': 'Nous avons mis en place',
    'Our company': 'Notre entreprise',
    'We maintain': 'Nous maintenons',
    'We are committed to': 'Nous nous engageons à',
    'Our policy covers': 'Notre politique couvre',
    'We are in the process of': 'Nous sommes en train de',
    'Data not currently available': 'Données actuellement non disponibles',
    'This data is based on': 'Ces données sont basées sur',
    'Total emissions': 'Émissions totales',
    'Scope 1 emissions': 'Émissions de scope 1',
    'Scope 2 emissions': 'Émissions de scope 2',
    'Scope 3 emissions': 'Émissions de scope 3',
    'tonnes CO2e': 'tonnes CO2e',
    'tCO2e': 'tCO2e',
    'renewable energy': 'énergie renouvelable',
    'recycling rate': 'taux de recyclage',
    'total waste': 'déchets totaux',
    'water consumption': "consommation d'eau",
    'training hours': 'heures de formation',
    'work accidents': 'accidents du travail',
    'work-related injuries': 'blessures liées au travail',
    'per year': 'par an',
    'per employee': 'par employé',
    'per annum': 'par an',
    'employees': 'employés',
    'estimated': 'estimé',
    'measured': 'mesuré',
    'calculated': 'calculé',
    'implementing': 'mettre en œuvre',
    'code of conduct': 'code de conduite',
    'environmental policy': 'politique environnementale',
    'environmental management': 'gestion environnementale',
    'anti-corruption': 'anti-corruption',
    'anti-bribery': 'anti-corruption',
    'health and safety': 'santé et sécurité',
    'occupational health': 'santé au travail',
    'diversity and inclusion': 'diversité et inclusion',
    'diversity': 'diversité',
    'sustainability': 'durabilité',
    'sustainable development': 'développement durable',
    'supply chain': "chaîne d'approvisionnement",
    'value chain': 'chaîne de valeur',
    'human rights': "droits de l'homme",
    'greenhouse gas': 'gaz à effet de serre',
    'carbon footprint': 'empreinte carbone',
    'carbon emissions': 'émissions de carbone',
    'climate change': 'changement climatique',
    'energy efficiency': 'efficacité énergétique',
    'energy consumption': "consommation d'énergie",
    'waste management': 'gestion des déchets',
    'water management': "gestion de l'eau",
    'hazardous waste': 'déchets dangereux',
    'biodiversity': 'biodiversité',
    'stakeholder engagement': 'engagement des parties prenantes',
    'stakeholders': 'parties prenantes',
    'due diligence': 'diligence raisonnable',
    'risk assessment': 'évaluation des risques',
    'continuous improvement': 'amélioration continue',
    'reporting period': 'période de reporting',
    'fiscal year': 'exercice fiscal',
    'calendar year': 'année civile',
    'electricity': 'électricité',
    'natural gas': 'gaz naturel',
    'renewable': 'renouvelable',
    'recycled': 'recyclé',
    'landfill': 'enfouissement',
    'workforce': 'effectifs',
    'gender pay gap': 'écart de rémunération entre les sexes',
    'whistleblower': 'lanceur d\'alerte',
    'grievance mechanism': 'mécanisme de réclamation',
    'materiality assessment': 'analyse de matérialité',
    'data privacy': 'protection des données',
    'circular economy': 'économie circulaire',
  },
  es: {
    'We have implemented': 'Hemos implementado',
    'Our company': 'Nuestra empresa',
    'We maintain': 'Mantenemos',
    'We are committed to': 'Estamos comprometidos con',
    'Our policy covers': 'Nuestra política cubre',
    'We are in the process of': 'Estamos en proceso de',
    'Data not currently available': 'Datos no disponibles actualmente',
    'This data is based on': 'Estos datos se basan en',
    'Total emissions': 'Emisiones totales',
    'Scope 1 emissions': 'Emisiones de alcance 1',
    'Scope 2 emissions': 'Emisiones de alcance 2',
    'Scope 3 emissions': 'Emisiones de alcance 3',
    'tonnes CO2e': 'toneladas CO2e',
    'tCO2e': 'tCO2e',
    'renewable energy': 'energía renovable',
    'recycling rate': 'tasa de reciclaje',
    'total waste': 'residuos totales',
    'water consumption': 'consumo de agua',
    'training hours': 'horas de formación',
    'work accidents': 'accidentes laborales',
    'work-related injuries': 'lesiones laborales',
    'per year': 'por año',
    'per employee': 'por empleado',
    'per annum': 'por año',
    'employees': 'empleados',
    'estimated': 'estimado',
    'measured': 'medido',
    'calculated': 'calculado',
    'implementing': 'implementar',
    'code of conduct': 'código de conducta',
    'environmental policy': 'política ambiental',
    'environmental management': 'gestión ambiental',
    'anti-corruption': 'anticorrupción',
    'anti-bribery': 'antisoborno',
    'health and safety': 'salud y seguridad',
    'occupational health': 'salud ocupacional',
    'diversity and inclusion': 'diversidad e inclusión',
    'diversity': 'diversidad',
    'sustainability': 'sostenibilidad',
    'sustainable development': 'desarrollo sostenible',
    'supply chain': 'cadena de suministro',
    'value chain': 'cadena de valor',
    'human rights': 'derechos humanos',
    'greenhouse gas': 'gas de efecto invernadero',
    'carbon footprint': 'huella de carbono',
    'carbon emissions': 'emisiones de carbono',
    'climate change': 'cambio climático',
    'energy efficiency': 'eficiencia energética',
    'energy consumption': 'consumo de energía',
    'waste management': 'gestión de residuos',
    'water management': 'gestión del agua',
    'hazardous waste': 'residuos peligrosos',
    'biodiversity': 'biodiversidad',
    'stakeholder engagement': 'participación de partes interesadas',
    'stakeholders': 'partes interesadas',
    'due diligence': 'debida diligencia',
    'risk assessment': 'evaluación de riesgos',
    'continuous improvement': 'mejora continua',
    'reporting period': 'período de reporte',
    'fiscal year': 'año fiscal',
    'calendar year': 'año calendario',
    'electricity': 'electricidad',
    'natural gas': 'gas natural',
    'renewable': 'renovable',
    'recycled': 'reciclado',
    'landfill': 'vertedero',
    'workforce': 'plantilla',
    'gender pay gap': 'brecha salarial de género',
    'whistleblower': 'denunciante',
    'grievance mechanism': 'mecanismo de quejas',
    'materiality assessment': 'evaluación de materialidad',
    'data privacy': 'protección de datos',
    'circular economy': 'economía circular',
  },
};

/**
 * Translate ESG answer text using phrase replacement.
 * Replaces common ESG terms and sentence patterns.
 * Not a full translation — preserves numbers, units, and structure.
 */
export function translateAnswer(answer, targetLang) {
  if (!answer || targetLang === 'en') return answer;

  const phrases = PHRASE_MAP[targetLang];
  if (!phrases) return answer;

  let translated = answer;

  // Sort by length (longest first) to avoid partial replacements
  const sorted = Object.entries(phrases).sort((a, b) => b[0].length - a[0].length);

  for (const [en, local] of sorted) {
    const escaped = en.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    const regex = new RegExp(escaped, 'gi');
    translated = translated.replace(regex, (match) => {
      // Preserve original capitalization pattern
      if (match[0] === match[0].toUpperCase() && match[0] !== match[0].toLowerCase()) {
        return local[0].toUpperCase() + local.slice(1);
      }
      return local;
    });
  }

  return translated;
}
